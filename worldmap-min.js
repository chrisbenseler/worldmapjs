var WorldMap=function(o){"use strict";var r={},n={colors:{borders:{normal:"#000000",hover:"#CC0000"},fills:{normal:"#AAAAAA",hover:"#DDDDDD"}},data_path:"../data/world_svg_paths_by_code.json",container:null};for(var t in o)n.hasOwnProperty(t)&&(n[t]=o[t]);var e=function(){if(null==n.container)throw"No container for map defined";$.when($.getJSON(n.data_path)).done(function(o){var t=new Raphael(n.container[0]);$.each(o,function(o,e){var s,a=new WorldMap.Region(o);r[o]=a;for(var l=0,c=e.length;c>l;l++)s=t.path(e[l]),s.region=o,a.borders.push(s);i(o,n)})})};e();var i=function(o,n){void 0!==r[o]&&null!==n.colors&&$(r[o].borders).each(function(t,e){var i=e;i.attr({stroke:n.colors.borders.normal,"stroke-width":1,fill:n.colors.fills.normal}),$(i.node).mousemove(function(){r[o].colorize(n)}).mouseout(function(){r[o].uncolorize(n)})})};return this.get_region=function(o){return r[o]||null},this.options=n,this.update_region=i,this};WorldMap.Region=function(o){return this.name=o,this.borders=[],this.colorize=function(o){for(var r=this,n=0,t=r.borders.length;t>n;n++)r.borders[n].animate({fill:o.colors.fills.hover,stroke:o.colors.borders.hover,"stroke-width":2},333)},this.uncolorize=function(o){for(var r=this,n=0,t=r.borders.length;t>n;n++)r.borders[n].animate({fill:o.colors.fills.normal,stroke:o.colors.borders.normal,"stroke-width":1},333)},this.on=function(o,r){var n=this;$(n.borders).each(function(t,e){$(e.node).on(o+".worldmap",function(){r.call(this,n)})})},this.off=function(o){var r=this;$(r.borders).each(function(r,n){$(n.node).off(o+".worldmap")})},this};